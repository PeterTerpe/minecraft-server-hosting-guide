# 科学上网 (翻墙)
_此篇探讨为什么以及如何翻墙（当前只添加了v2rayA部分）_

## 目录
- 翻墙的目的
- 如何翻墙
- 注意事项

## 翻墙的目的
对于MC服务器而言，如果使用正版验证(online-mode)，玩家在连接服务器时，服务器或玩家会向Mojang验证服务器请求验证，由于国内网络波动等种种问题，时常会出现验证服务器不可达的情况，届时玩家将无法进入服务器(会出现卡在"通讯加密中"、出现"身份验证服务器宕机，请稍后再试"等状况)。此篇主要探讨如何避免出现这类问题。

当然除玩家验证外，许多服务在国内的直连效果都不是很理想，也可以通过翻墙来解决。

## 如何翻墙
- 使用机场订阅
- 自建节点
- 使用Cloudflare worker进行http转发 (免费，仅对特定场景生效)
### 在Linux系统
_大部分MC服务端所运行的系统环境_

推荐软件：
- v2rayA (Debian可以自动安装，配置较少)
- dae (更好的直连速度，Debian系统须手动安装)

<h4>v2rayA</h4>
- 安装

    这个部分需要注意的是v2rayA依赖v2ray，不要忘记安装v2ray不然会不起作用
- 配置
    - 导入机场订阅/自建节点
    - 设置分流规则

        v2rayA自带了绕过大陆的分流规则，一般情况下可以直接使用。需要注意的是如果你有DDNS服务运行在使用v2rayA的主机上，并使用了http来获取IP的方式，**直接使用该规则可能导致DDNS客户端获取到错误的IP，造成DNS出错。**

        为了避免DDNS出错，或者你想进行细致的把控分流规则，推荐使用RouteA模式，在此模式下你可以具体要求对哪个域名使用代理，哪个域名使用直连，如果需要，也可以使用预设的分流规则。本文档结尾会附带一份样板RouteA配置。
    - 为Docker内运行的程序配置

        v2rayA并不能轻易拦截Docker内的DNS请求，因此有可能导致Docker内的程序无法正确被代理，最方便的做法是配置Docker的环境变量中的DNS至8.8.8.8、1.1.1.1。
<h4>v2rayA RouteA 配置</h4>

```
# —— 基础策略 ——
default: direct
domain(domain:ipip.net) -> direct # DDNS使用http获取IP的域名，根据具体需要删除或修改
domain(geosite:cn) -> direct
domain(geosite:geolocation-!cn) -> proxy

# —— Minecraft / Mojang / Microsoft 认证链（强制代理，双保险 ）——
domain(domain:minecraftservices.com, domain:api.minecraftservices.com) -> proxy
domain(domain:mojang.com, domain:minecraft.net) -> proxy
domain(domain:sessionserver.mojang.com, domain:authserver.mojang.com, domain:api.mojang.com, domain:textures.minecraft.net) -> proxy
domain(domain:piston-meta.mojang.com, domain:libraries.minecraft.net, domain:resources.download.minecraft.net, domain:launcher.mojang.com) -> proxy

# —— Microsoft 账号 & Xbox Live（MC 新登录链必经）——
domain(domain:microsoft.com, domain:login.microsoftonline.com, domain:live.com, domain:login.live.com) -> proxy
domain(domain:xboxlive.com, domain:xboxservices.com, domain:user.auth.xboxlive.com, domain:xsts.auth.xboxlive.com, domain:profile.xboxlive.com, domain:accounts.xboxlive.com) -> proxy
domain(domain:onedrive.com, domain:msn.com) -> proxy

# —— 常用站点（按偏好保留）——
domain(domain:docker.com, domain:github.com, domain:fabricmc.net, domain:skinsrestorer.net, domain:lucko.me, domain:filebin.net) -> proxy

# —— Cloudflare ——
domain(domain:workers.dev, domain:cloudflare.com) -> direct
```
