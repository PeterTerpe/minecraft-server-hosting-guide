# 操作系统

_此章讲解不同操作系统的功能, 简单介绍Linux发行版之间的差距，并对比优缺点。__

_本文作者：Creeper23456_

# 前言

操作系统是一台计算机系统的根基。这对于你的Minecraft服务器也同样如此。

正确的选择，能将服主与管理团队有限的精力最大化集中在服务器的运营、维护和宣传。

但无论如何，我们倡导在起初时服主选择最趁手的操作系统。这很利于快速上手。Minecraft服务器著名的灵活性、Java的广泛兼容性与社区的开放性则赋予了管理团队在未来迁移到其他操作系统平台的自由。

下文，将对市占率较高的三大操作系统派系，以及少部分冷门操作系统进行一些特性上的总结，为各位服主与管理团队提供参考性意见。

# Windows

Windows是毋庸置疑、最受用户欢迎的操作系统。然而其在Minecraft服务器社区却并非如此。

一方面，受限于RDP会话的设定，在Windows服务器开设Minecraft服务器建议安装单独的进程监视器（如MultiCraft、NSSM等）以保障服务器在线时长。如果你使用frp作为建立代理隧道的工具，则必须安装这些进程监视器确保frp进程正常工作。

另一方面，如果你选择了Datacenter的Windows server，或直接使用标准的桌面系统运行服务器，则会面临WDM，或Windows Desktop Manager对资源尤其是运行内存占用的困扰。这对于小型服务器而言是致命的资源消耗。

此外，Windows的安全性也饱受诟病。以下对不同版本的Windows进行列表，方便服主选择。

| 内核版本 | 包含的版本 | 支持的JRE | 是否支持运行BDS |
| --- | --- | --- | --- |
| NT10 | Server 2016-2025, Windows 10-11 | Java 8-21 | ✅   |
| NT6 | Server 2008 R2-2012, Windows 7-8.1 | Java 6-21 | ✅（旧版本） |
| NT5 | Server 2003-2008, Windows XP, Vista | Java 5-8 (x86 only) | ❌   |

出于安全建议，不要使用过时的Windows系统。不要使用老旧的Java版本。主流的Minecraft服务器软件均运行在最新版本的JRE之上。

不要使用常用的RDP服务端口，并安装第三方的杀毒软件。不要出于性能要求禁用Defender。

# Linux

Linux是操作系统内核，是GNU\Linux的重要部分。基于GNU\Linux软件开发的操作系统被称为Linux系统。

Linux是最便于部署且性能开支小的操作系统。且有极高的服务健壮性。

在本文中，我们还将介绍Android\Linux的对Minecraft服务器软件的支持情况。但在此之前，需要先介绍Linux发行版的有关知识。

## Linux桌面/服务器发行版入门

Linux分为桌面发行版与无头发行版两大类别。对于此前使用过macOS或Windows的用户而言，桌面发行版是最易上手的选择。它和大部分你曾经接触过的操作逻辑相同。无头发行版则在操作系统安装后只提供命令行界面，管理员通常以SSH进行维护。

对于桌面发行版，也可在启用X-forwarding后在Xfce桌面环境下通过SSH访问远程图形化界面。仅限Linux与macOS (安装XQuartz)，Windows则需要使用XShell一类的工具访问。

按包管理器与整体发行版设计哲学的不同，以及其上游不同，在本文为了便于理解简化为Debian系与RHEL系。

| 发行版名称 | 自带桌面环境 | 自带无头环境 | 所属上游 | 包管理器 | 备注  |
| --- | --- | --- | --- | --- | --- |
| Ubuntu | ✅   | ✅   | Debian | dpkg, apt, snap | 最受欢迎的发行版。公开教程与资料最多。 |
| Linux Mint | ✅   | ❌   | Ubuntu | dpkg, apt, flatpak | 最建议新手尝试。桌面环境可禁用以节约开支。虽基于Ubuntu上游，但软件包选择上更保守。总体更稳定 |
| Fedora | ✅   | ✅   | CentOS | yum, dnf, flatpak | 软件包与内核版本激进。采取滚动式更新策略，每半年左右一次版本号更新。适合喜欢尝鲜或测试使用。 |
| CentOS Stream | ❌   | ✅   | RHEL | yum, dnf | 准确而言为RHEL的上游。滚动式更新。 |
| Arch Linux | ❌   | ✅   | /   | pacman | 不建议新手使用 |
| Rocky Linux | ❌   | ✅   | RHEL | yum, dnf | 是旧CentOS的替代。建议使用。稳定且长期更新。 |
| Alma Linux | ❌   | ✅   | RHEL | yum, dnf | 同Rocky Linux。 |

如果你想直接上手服务器发行版，可以跳过下文对桌面发行版的介绍。

### 桌面发行版

对于新手，在下载镜像时，可以有两种选择：GNOME与Xfce。

GNOME有最时髦的桌面动效，以及现代化的界面设计。但相对而言，其性能开支与Windows桌面相当。

Xfce只具备基础的桌面环境，界面粗糙，但性能开支相对最小化。值得一试。

### 无头发行版

如果你想节约服务器资源开支，或节约硬盘空间，亦或是更熟悉Linux命令行操作，则可以使用无头发行版。

注意：在无头服务器上，JFX几乎不工作。这意味着对于Java版本的Minecraft而言，依赖于JFX库的图形功能的所有特性不可用。但几乎没有服务器会使用到这个特性。JFX通常作为客户端依赖出现。

注意：在无头服务器上启动Java版本的Minecraft服务器，需要添加参数：`-nogui`

对于无头发行版，需要一个进程管理器来管理你的Minecraft实例。一旦你的SSH连接断开，并且没有使用合适的进程管理器，则会导致Minecraft实例被关闭。

进程管理器通常会是MCSM面板，简单易上手。但对于新手而言，tmux也是一个简单易用且性能开支更小的选择。

对于tmux，使用Ctrl+B进入指令模式，使用Ctrl+D短暂离开当前回话，进程保持运行。进入指令模式后，使用Ctrl+%进入分屏模式，输入x即可强制关闭当前回话。在分屏模式下，你可以开启frp与服务器进程二者，方便调试。

不建议新手跟随教程使用systemd或supervisord。

### Android

在Android系统运行Minecraft服务器主要依赖于容器技术。

在Android 7之前，需要root才能启用容器。随着Termux以及其pkg包管理器的完善，在Android上开服有了可能。

请注意：确保你的Android设备有良好的散热并有稳定的网络连接，并接入了电源。

frp与大部分代理软件支持armhf，但对于更新版本的JRE，你需要支持处理器与Android的Linux内核均支持aarch。这点可以在设置>关于手机中检查是否符合条件。如果内核或处理器不支持aarch，则只能运行32位的Java 8。

如果你的Android版本小于7，请先解锁设备的bootloader，随后通过SuperSU或Magisk获取root权限，最后安装Linux Deploy并部署容器服务。之后的操作与普通Linux发行版开服步骤无异。

如果你的Android版本大于等于7，则可以考虑安装Termux并使用其内置的pkg包管理器。通过pkg安装Java实现开服。

# macOS

对于macOS，首先需要在设置-电源中，点击“选项”。对于老版本的macOS而言，还需要输入密码验证并解锁可更改项目。将睡眠有关的选项进行关闭。

之后，建议安装brew。随后便可安装个人喜好的Java版本。

macOS自带甲骨文的Java环境。但有时，使用第三方的JRE会有更高性能的体验。对于新手而言，使用自带的JRE即可实现开服。

对于使用Apple Silicon的服主，可考虑分配超过本机闲余内存的JVM大小。

(等待后续补充)
