---

# 操作系统

*此章讲解不同操作系统的功能, 简单介绍Linux发行版之间的差距，并对比优缺点。*

---

# 前言

操作系统是一台计算机系统的根基。这对于你的Minecraft服务器也同样如此。

正确的选择，能将服主与管理团队有限的精力最大化集中在服务器的运营、维护和宣传。

但无论如何，我们倡导在起初时服主选择**最趁手的操作系统**。这很利于快速上手。Minecraft服务器著名的灵活性、Java的广泛兼容性与社区的开放性，则赋予了管理团队在未来迁移到其他操作系统平台的自由。

下文，将对市占率较高的三大操作系统派系，以及少部分冷门操作系统进行一些特性上的总结，并提供具体的**命令示例**，为各位服主与管理团队提供参考性意见。

---

# Windows

Windows是毋庸置疑、最受用户欢迎的操作系统。然而其在Minecraft服务器社区却并非如此。

一方面，受限于RDP会话的设定，在Windows服务器开设Minecraft服务器建议安装单独的进程监视器（如**MultiCraft**、**NSSM**等）以保障服务器在线时长。如果你使用**frp**作为建立代理隧道的工具，则必须安装这些进程监视器确保frp进程正常工作。

另一方面，如果你选择了Datacenter的Windows Server，或直接使用标准的桌面系统运行服务器，则会面临**WDM (Windows Desktop Manager)** 对资源尤其是运行内存占用的困扰。这对于小型服务器而言是致命的资源消耗。

此外，Windows的安全性也饱受诟病。以下对不同版本的Windows进行列表，方便服主选择：

| 内核版本 | 包含的版本                               | 支持的JRE              | 是否支持运行BDS |
| ---- | ----------------------------------- | ------------------- | --------- |
| NT10 | Server 2016-2025, Windows 10-11     | Java 8-21           | ✅         |
| NT6  | Server 2008 R2-2012, Windows 7-8.1  | Java 6-21           | ✅（旧版本）    |
| NT5  | Server 2003-2008, Windows XP, Vista | Java 5-8 (x86 only) | ❌         |

⚠️ **安全建议**：

* 不要使用过时的Windows系统
* 不要使用老旧的Java版本
* 不要开放默认的RDP端口
* 使用Defender或第三方杀毒软件确保服务器安全

### 示例指令（Windows CMD/PowerShell）

启动Minecraft服务端：

```powershell
java -Xmx2G -Xms2G -jar server.jar nogui
```

使用 **NSSM** 设置Minecraft为服务：

```powershell
nssm install Minecraft "C:\Program Files\Java\bin\java.exe" "-Xmx2G -Xms2G -jar C:\mc\server.jar nogui"
```

检查Java版本：

```powershell
java -version
```

---

# Linux

Linux是操作系统内核，是GNU\Linux的重要部分。基于GNU\Linux软件开发的操作系统被称为Linux系统。

Linux是最便于部署且性能开支小的操作系统。且有极高的服务健壮性。

在本文中，我们还将介绍**Android\Linux**对Minecraft服务器软件的支持情况。但在此之前，需要先介绍Linux发行版的有关知识。

---

## Linux桌面/服务器发行版入门

Linux分为**桌面发行版**与**无头发行版**两大类别。

* 桌面发行版：对新手更友好，带图形化界面（如Ubuntu Desktop）。
* 无头发行版：资源开销小，只提供命令行界面，通常通过SSH维护。

常见发行版对比表：

| 发行版名称         | 自带桌面环境 | 自带无头环境 | 所属上游   | 包管理器         | 备注             |
| ------------- | ------ | ------ | ------ | ------------ | -------------- |
| Ubuntu        | ✅      | ✅      | Debian | apt, snap    | 资料最多，新手首选      |
| Linux Mint    | ✅      | ❌      | Ubuntu | apt, flatpak | 桌面更美观稳定，适合本地测试 |
| Fedora        | ✅      | ✅      | CentOS | dnf          | 更新激进，适合测试环境    |
| CentOS Stream | ❌      | ✅      | RHEL   | dnf          | 滚动更新，RHEL上游    |
| Arch Linux    | ❌      | ✅      | /      | pacman       | 不建议新手          |
| Rocky Linux   | ❌      | ✅      | RHEL   | dnf          | 稳定，推荐长期使用      |
| Alma Linux    | ❌      | ✅      | RHEL   | dnf          | 同上，CentOS替代品   |

---

### 桌面发行版

* GNOME：动效华丽，但耗费资源。
* Xfce：简陋但轻量，推荐服务器尝试。

### 无头发行版

适合节省资源，常配合 `tmux`、`screen`、`systemd` 等进程管理工具。

⚠️ 注意：Java服务器启动需带 `-nogui` 参数。

---

### 示例指令（Linux）

更新系统：

```bash
sudo apt update && sudo apt upgrade -y
```

安装Java（以Ubuntu为例）：

```bash
sudo apt install openjdk-21-jre -y
```

启动Minecraft：

```bash
java -Xmx2G -Xms2G -jar server.jar nogui
```

使用 `tmux` 保持进程：

```bash
tmux new -s mc
java -Xmx2G -Xms2G -jar server.jar nogui
# 按 Ctrl+B 然后 D 退出保持运行
```

---

### Android

Android上运行Minecraft服务器需借助 **Termux** 或 **Linux Deploy**。

* Android 7以下：需要Root，使用Linux Deploy。
* Android 7及以上：可直接使用Termux。

### 示例指令（Termux）

安装Java：

```bash
pkg install openjdk-17
```

进入Minecraft目录并启动：

```bash
cd ~/mcserver
java -Xmx1G -Xms1G -jar server.jar nogui
```

---

# macOS

macOS同样可运行Java版Minecraft服务器。

### 前置准备

* 关闭睡眠（系统设置 → 电源）。
* 安装Homebrew。

### 示例指令（macOS）

安装Java：

```bash
brew install openjdk@21
```

运行服务器：

```bash
java -Xmx2G -Xms2G -jar server.jar nogui
```

允许执行 `.jar` 文件（若出现安全提示）：

```bash
xattr -d com.apple.quarantine server.jar
```

⚠️ 注意：macOS **不支持BDS**。
